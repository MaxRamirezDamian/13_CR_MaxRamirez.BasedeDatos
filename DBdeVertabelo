-- Created by Vertabelo (http://vertabelo.com)
-- Last modification date: 2022-09-16 14:57:56.169

-- tables
-- Table: CLIENTE
CREATE TABLE CLIENTE (
    IDCLI int  NOT NULL,
    NOMCLI varchar(60)  NOT NULL,
    APECLI varchar(60)  NOT NULL,
    DNICLI char(8)  NOT NULL,
    EMACLI varchar(90)  NOT NULL,
    DIRCLI varchar(90)  NOT NULL,
    CELCLI char(9)  NOT NULL,
    CONSTRAINT CLIENTE_pk PRIMARY KEY (IDCLI)
);

-- Table: PRODUCTO
CREATE TABLE PRODUCTO (
    CODPRO char(5)  NOT NULL,
    NOMPRO varchar(60)  NOT NULL,
    MARKPRO varchar(30)  NOT NULL,
    CATPRO varchar(30)  NOT NULL,
    PREPRO decimal(2,8)  NOT NULL,
    MASCPRO varchar(30)  NOT NULL,
    ETMASC char(10)  NOT NULL,
    CONSTRAINT PRODUCTO_pk PRIMARY KEY (CODPRO)
);

-- Table: VENDEDOR
CREATE TABLE VENDEDOR (
    IDVEND int  NOT NULL,
    NOMVEND varchar(60)  NOT NULL,
    APEVEND varchar(60)  NOT NULL,
    DNIVEND char(8)  NOT NULL,
    EMAVEND varchar(90)  NOT NULL,
    DIRVEND varchar(90)  NOT NULL,
    CELVEND char(9)  NOT NULL,
    ESTVEND char(1)  NOT NULL,
    CONSTRAINT VENDEDOR_pk PRIMARY KEY (IDVEND)
);

-- Table: VENTA
CREATE TABLE VENTA (
    IDVENT int  NOT NULL,
    CODCLI int  NOT NULL,
    CODVEND int  NOT NULL,
    FECVENT date  NOT NULL,
    CONSTRAINT VENTA_pk PRIMARY KEY (IDVENT)
);

-- Table: VENTADETALLE
CREATE TABLE VENTADETALLE (
    IDVENDET int  NOT NULL,
    CODVENT int  NOT NULL,
    CANTVENT int  NOT NULL,
    CODPRO char(5)  NOT NULL,
    CONSTRAINT VENTADETALLE_pk PRIMARY KEY (IDVENDET)
);

-- foreign keys
-- Reference: VENTADETALLE_PRODUCTO (table: VENTADETALLE)
ALTER TABLE VENTADETALLE ADD CONSTRAINT VENTADETALLE_PRODUCTO
    FOREIGN KEY (CODPRO)
    REFERENCES PRODUCTO (CODPRO)  
    NOT DEFERRABLE 
    INITIALLY IMMEDIATE
;

-- Reference: VENTADETALLE_VENTA (table: VENTADETALLE)
ALTER TABLE VENTADETALLE ADD CONSTRAINT VENTADETALLE_VENTA
    FOREIGN KEY (CODVENT)
    REFERENCES VENTA (IDVENT)  
    NOT DEFERRABLE 
    INITIALLY IMMEDIATE
;

-- Reference: VENTA_CLIENTE (table: VENTA)
ALTER TABLE VENTA ADD CONSTRAINT VENTA_CLIENTE
    FOREIGN KEY (CODCLI)
    REFERENCES CLIENTE (IDCLI)  
    NOT DEFERRABLE 
    INITIALLY IMMEDIATE
;

-- Reference: VENTA_VENDEDOR (table: VENTA)
ALTER TABLE VENTA ADD CONSTRAINT VENTA_VENDEDOR
    FOREIGN KEY (CODVEND)
    REFERENCES VENDEDOR (IDVEND)  
    NOT DEFERRABLE 
    INITIALLY IMMEDIATE
;

-- End of file.

